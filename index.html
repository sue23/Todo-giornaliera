<script>
const today = new Date();
const yyyy = today.getFullYear();
const mm = today.getMonth(); // 0 = gennaio
const dd = today.getDay();   // 0 = domenica

const container = document.body;

// ---------- FUNZIONE UTILE ----------
function addTask(id, text, resetDaily = true) {
  const key = resetDaily
    ? `${id}-${yyyy}-${mm}-${today.getDate()}`
    : `${id}-${yyyy}-${mm}`;

  if (localStorage.getItem(key) === "done") return;

  const label = document.createElement("label");
  const cb = document.createElement("input");
  cb.type = "checkbox";

  cb.onchange = () => {
    if (cb.checked) localStorage.setItem(key, "done");
  };

  label.appendChild(cb);
  label.append(" " + text);
  container.appendChild(label);
}

// ---------- GIORNALIERI (lascia i tuoi) ----------
// ESEMPIO:
// addTask("daily1", "Bere acqua");
// addTask("daily2", "Camminare 20 min");

// ---------- SETTIMANALI ----------
const weekly = {
  1: ["Materassi e cambio lenzuola", "Spolverare"],           // Lunedì
  2: ["Spolverare"],                                          // Martedì
  3: ["Pavimenti e bagni"],                                   // Mercoledì
  4: ["Bucato"],                                              // Giovedì
  5: ["Bidoni e tappeti"],                                    // Venerdì
  0: ["Aspirapolvere"]                                        // Domenica
};

if (weekly[dd]) {
  weekly[dd].forEach(t =>
    addTask("weekly-" + t, t)
  );
}

// ---------- MENSILI ----------
const monthly = [
  "Frigo",
  "Forno e microonde",
  "Lavastoviglie e cappa",
  "Lavatrice e asciugatrice",
  "Pulizia profonda aspirapolvere",
  "Vetri",
  "Battiscopa",
  "Porte",
  "Interruttori",
  "Giardino"
];

monthly.forEach(t =>
  addTask("monthly-" + t, t, false)
);

// ---------- STRAORDINARIE ----------
const special = [
  { task: "Scarichi", months: [0,5,10] },                    // gen giu nov
  { task: "Mobili sotto e dietro", months: [1,5,9] },
  { task: "Decalcificazione macchina caffè e bollitore", months: [1,6,11] },
  { task: "Interno dei cassetti", months: [0,4,8] },
  { task: "Termosifoni e condizionatori", months: [4,9] },
  { task: "Soffitto e pareti", months: [2,6,10] },
  { task: "Spolverare in alto", months: [3,7,11] },
  { task: "Pavimento giardino", months: [3,7] },
  { task: "Ordinare giardino", months: [2,6,10] },
  { task: "Cambio stagione", months: [3,9] },
  { task: "Marciapiede e muri esterni", months: [0,8] }
];

special.forEach(s => {
  if (s.months.includes(mm)) {
    addTask("special-" + s.task, s.task, false);
  }
});
</script>